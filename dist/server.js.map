{"version":3,"sources":["webpack:///webpack/bootstrap df840d8ba8fd31668d19","webpack:///external \"path\"","webpack:///./src/server/main.js","webpack:///./config.js","webpack:///external \"./assets\"","webpack:///external \"babel-runtime/core-js/promise\"","webpack:///external \"babel-runtime/helpers/asyncToGenerator\"","webpack:///external \"babel-runtime/regenerator\"","webpack:///external \"body-parser\"","webpack:///external \"cookie-parser\"","webpack:///external \"express\"","webpack:///external \"fs\"","webpack:///external \"lru-cache\"","webpack:///external \"pretty-error\"","webpack:///external \"serialize-javascript\"","webpack:///external \"serve-favicon\"","webpack:///external \"vue-server-renderer\"","webpack:///external \"xtpl\""],"names":["process","env","VUE_ENV","fs","require","createBundleRenderer","bundlePath","path","resolve","__dirname","renderer","readFileSync","cache","max","assets","app","express","set","use","favicon","static","cookieParser","bodyParser","urlencoded","extended","json","get","req","res","next","statusCode","data","title","body","entry","main","js","context","url","renderToString","err","html","then","initialState","serialize","isJSON","status","render","e","pe","skipNodeFiles","skipPackage","console","log","message","stack","listen","config","port"],"mappings":"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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmory imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmory exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tObject.defineProperty(exports, name, {\n \t\t\tconfigurable: false,\n \t\t\tenumerable: true,\n \t\t\tget: getter\n \t\t});\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 17);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap df840d8ba8fd31668d19","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 0\n// module chunks = 0","process.env.VUE_ENV = 'server'\n\nimport path from 'path'\nimport config from '../../config.js'\nimport express from 'express'\nimport favicon from 'serve-favicon'\nimport cookieParser from 'cookie-parser'\nimport bodyParser from 'body-parser'\nimport xtpl from 'xtpl'\nimport serialize from 'serialize-javascript'\nimport PrettyError from 'pretty-error'\n\nconst fs = require('fs')\nconst createBundleRenderer = require('vue-server-renderer').createBundleRenderer\nconst bundlePath = path.resolve(__dirname, './server-bundle.js')\nconst renderer = createBundleRenderer(fs.readFileSync(bundlePath, 'utf-8'), {\n\tcache: require('lru-cache')({ max: 10000 })\n})\nconst assets = require('./assets')\n\nconst app = express()\napp.set('views', path.resolve(__dirname, './views'))\napp.set('view engine', 'xtpl')\n\napp.use(favicon(path.resolve(__dirname, './public/logo.png')))\napp.use(express.static(path.resolve(__dirname, 'public')))\napp.use(cookieParser())\napp.use(bodyParser.urlencoded({ extended: true }))\napp.use(bodyParser.json())\napp.get('*', async(req, res, next) => {\n\ttry {\n\t\tlet statusCode = 200\n\t\tconst data = {\n\t\t\ttitle: 'Vuepack-SSR',\n\t\t\t// description: '',\n\t\t\t// css: '',\n\t\t\tbody: '',\n\t\t\tentry: assets.main.js,\n\t\t}\n\t\tconst context = { url: req.url }\n\t\tnew Promise(resolve => {\n\t\t\trenderer.renderToString(context, (err, html) => {\n\t\t\t\tif(err) {\n\t\t\t\t\tnext(err)\n\t\t\t\t}\n\t\t\t\tdata.body = html\n\t\t\t\tresolve()\n\t\t\t})\n\t\t}).then(() => {\n\t\t\tdata.initialState = serialize(context.initialState, { isJSON: true })\n\t\t\tres.status(statusCode)\n\t\t\tres.render('index', data)\n\t\t})\n\t} catch(e) {\n\t\tnext(err)\n\t}\n})\n\nconst pe = new PrettyError()\npe.skipNodeFiles()\npe.skipPackage('express')\n\napp.use((err, req, res, next) => {\n\tconsole.log(pe.render(err))\n\tconst statusCode = err.status || 500\n\tres.status(statusCode)\n\tres.render('error', {\n\t\ttitle: 'Error',\n\t\tmessage: err.message,\n\t\tstack: process.env.NODE_ENV === 'production' ? '' : err.stack\n\t})\n})\n\napp.listen(config.port, () => {\n\tconsole.log(`The server is running at http://localhost:${config.port}/`)\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/main.js","import { join, resolve } from 'path'\n\nconst config = {\n\n\t// path\n\tpath: {\n\t\troot: resolve(__dirname),\n\t\tsrc: join(__dirname, './src'),\n\t\tdist: join(__dirname, './dist'),\n\t\tstatic: join(__dirname, './dist/public')\n\t},\n\n\t// post-css\n\tAUTOPREFIXER_BROWSERS: [\n\t\t'Android 2.3',\n\t\t'Android >= 4',\n\t\t'Firefox >= 31',\n\t\t'Explorer >= 9',\n\t\t'Chrome >= 35',\n\t\t'iOS >= 7',\n\t\t'Opera >= 12',\n\t\t'Safari >= 7.1'\n\t],\n\n\t// server\n\tport: 5000,\n\n\t//mongoose\n}\n\nexport default config\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./config.js\n// module id = 2\n// module chunks = 0","module.exports = require(\"./assets\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"./assets\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"babel-runtime/core-js/promise\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/promise\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/asyncToGenerator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/asyncToGenerator\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"babel-runtime/regenerator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/regenerator\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"cookie-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cookie-parser\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"lru-cache\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lru-cache\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"pretty-error\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"pretty-error\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"serialize-javascript\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"serialize-javascript\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"serve-favicon\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"serve-favicon\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"vue-server-renderer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vue-server-renderer\"\n// module id = 15\n// module chunks = 0","module.exports = require(\"xtpl\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"xtpl\"\n// module id = 16\n// module chunks = 0"],"sourceRoot":""}